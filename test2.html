<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장애인 접근성 체크리스트 대시보드</title>
    <!-- Plotly.js 라이브러리 (v2.35.2) -->
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }
        p.subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .chart-section-title {
            margin-top: 30px;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 5px solid #5C6BC0;
            font-size: 1.3em;
            color: #333;
            font-weight: bold;
        }
        .chart-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .chart-box {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            flex: 1;
            min-width: 300px;
            min-height: 450px; /* 차트 높이 확보 */
        }
        .full-width {
            flex-basis: 100%;
            min-height: 600px; /* 선버스트는 더 크게 */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📊 장애인 접근성 체크리스트 핵심 분석</h1>
        <p class="subtitle">계층 구조(Sunburst) 및 측정 수치 분포(Box Plot)</p>

        <!-- 섹션 1: 전체 계층 구조 -->
        <div class="chart-section-title">1. 전체 데이터 계층 구조 (상태 → 항목)</div>
        <div class="chart-row">
            <!-- 선버스트 차트 (크게 배치) -->
            <div id="sunburstChart" class="chart-box full-width"></div>
        </div>

        <!-- 섹션 2: 수치 데이터 상세 분석 -->
        <div class="chart-section-title">2. 단위별 측정 수치 분포 (m, cm, 도)</div>
        <div class="chart-row">
            <div id="boxChartM" class="chart-box"></div>
            <div id="boxChartCm" class="chart-box"></div>
            <div id="boxChartDeg" class="chart-box"></div>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. 데이터 정의 (필요한 데이터만 남김)
        // ==========================================
        
        // [선버스트 차트용 데이터]
        // 구조: 전체 -> 상태(양호/개선/긴급) -> 항목(유효폭/진입로 등)
        var sbLabels = ["전체", "양호", "유효폭", "점자블록", "건물 진입로", "기울기/단차", "포장상태", "개선(장기)", "건물 진입로", "기울기/단차", "점자블록", "긴급조치", "유효폭", "포장상태", "기울기/단차", "점자블록", "건물 진입로"];
        var sbParents = ["", "전체", "양호", "양호", "양호", "양호", "양호", "전체", "개선(장기)", "개선(장기)", "개선(장기)", "전체", "긴급조치", "긴급조치", "긴급조치", "긴급조치", "긴급조치"];
        var sbValues = [166, 117, 56, 24, 19, 14, 4, 33, 23, 8, 2, 16, 6, 5, 2, 2, 1];

        // [박스 플롯용 데이터] (m, cm, 도)
        // m 단위
        var boxMX = ["유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "건물 진입로", "건물 진입로", "유효폭", "유효폭", "유효폭", "건물 진입로", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "건물 진입로", "유효폭", "건물 진입로", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "유효폭", "유효폭", "유효폭", "유효폭", "건물 진입로", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "유효폭", "건물 진입로", "유효폭"];
        var boxMY = [3.6, 2.4, 1.5, 1.2, 9.0, 3.7, 2.3, 2.3, 1.9, 3.4, 2.9, 1.5, 1.5, 4.3, 1.5, 1.9, 2.2, 4.5, 1.5, 1.5, 3.6, 2.0, 10.0, 0.9, 1.4, 1.3, 1.4, 1.6, 1.5, 1.5, 4.5, 3.7, 1.3, 4.3, 1.5, 1.5, 1.8, 1.8, 0.8, 2.1, 3.8, 4.1, 6.9, 5.3, 1.1, 1.3, 2.2, 4.5, 4.1, 3.6, 3.2, 1.1, 1.1, 1.8, 3.7, 4.1, 1.6, 1.8, 3.0, 1.7, 5.3, 2.2, 1.8, 1.7, 1.6, 5.7, 4.0, 1.1, 1.6, 2.4, 5.1, 1.9, 1.5];
        
        // cm 단위
        var boxCmX = ["포장상태", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "기울기/단차", "기울기/단차", "건물 진입로", "건물 진입로", "기울기/단차", "건물 진입로", "기울기/단차", "기울기/단차", "건물 진입로", "건물 진입로"];
        var boxCmY = [0.1, 3.5, 5.8, 18.0, 21.0, 18.0, 4.0, 1.0, 2.1, 1.5, 14.0, 3.5, 11.5, 2.5, 3.3, 18.0, 18.0];
        
        // 도 단위
        var boxDegX = ["기울기/단차", "기울기/단차", "건물 진입로", "기울기/단차", "건물 진입로", "건물 진입로", "기울기/단차", "건물 진입로", "건물 진입로", "기울기/단차", "기울기/단차", "기울기/단차", "기울기/단차", "기울기/단차", "건물 진입로", "기울기/단차", "기울기/단차", "기울기/단차", "건물 진입로", "기울기/단차", "기울기/단차", "기울기/단차", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "기울기/단차", "건물 진입로", "건물 진입로", "건물 진입로", "건물 진입로", "기울기/단차", "건물 진입로", "건물 진입로", "기울기/단차", "건물 진입로", "건물 진입로", "기울기/단차"];
        var boxDegY = [2.4, 3.6, 4.8, 2.2, 9.7, 7.9, 1.4, 7.3, 8.8, 9.2, 6.7, 3.6, 4.5, 5.4, 16.8, 7.8, 6.7, 4.5, 7.0, 9.1, 3.7, 8.0, 3.5, 3.6, 3.6, 2.7, 3.5, 1.4, 5.9, 6.6, 16.0, 7.7, 4.0, 7.6, 1.0, 2.2, 8.0, 8.6, 26.0, 10.1];


        // ==========================================
        // 2. 차트 그리기
        // ==========================================

        // [차트 1] Sunburst Chart (계층형)
        Plotly.newPlot('sunburstChart', [{
            type: "sunburst",
            labels: sbLabels,
            parents: sbParents,
            values: sbValues,
            branchvalues: "total",
            textinfo: "label+value+percent parent", // 라벨+값+비율 표시
            marker: {line: {width: 2}},
        }], {
            title: '<b>☀️ 전체 데이터 상세 계층 구조</b>',
            margin: { t: 40, b: 20, l: 20, r: 20 }
        });

        // [차트 2] Box Plot - 미터(m) 단위
        Plotly.newPlot('boxChartM', [{
            x: boxMX,
            y: boxMY,
            type: 'box',
            name: '데이터 분포',
            boxpoints: 'all', // 모든 점 표시
            jitter: 0.3,
            pointpos: -1.8,
            marker: { color: '#42A5F5' }
        }], {
            title: '<b>📏 길이/폭 (m)</b>',
            yaxis: { title: '미터 (m)' },
            margin: { t: 40, b: 40, l: 40, r: 20 }
        });

        // [차트 3] Box Plot - 센티미터(cm) 단위
        Plotly.newPlot('boxChartCm', [{
            x: boxCmX,
            y: boxCmY,
            type: 'box',
            name: '데이터 분포',
            boxpoints: 'all',
            jitter: 0.3,
            pointpos: -1.8,
            marker: { color: '#AB47BC' }
        }], {
            title: '<b>📐 단차/높이 (cm)</b>',
            yaxis: { title: '센티미터 (cm)' },
            margin: { t: 40, b: 40, l: 40, r: 20 }
        });

        // [차트 4] Box Plot - 각도(도) 단위
        Plotly.newPlot('boxChartDeg', [{
            x: boxDegX,
            y: boxDegY,
            type: 'box',
            name: '데이터 분포',
            boxpoints: 'all',
            jitter: 0.3,
            pointpos: -1.8,
            marker: { color: '#FF7043' }
        }], {
            title: '<b>📐 경사/기울기 (도)</b>',
            yaxis: { title: '각도 (Degree)' },
            margin: { t: 40, b: 40, l: 40, r: 20 }
        });

    </script>
</body>
</html>